# Rubric

Use this project rubric to understand and assess the project criteria.

## Document Tools Implementation

| Criteria                                                                                    | Submission Requirements                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Implement DocumentToolsManager with proper LlamaIndex configuration and document processing | * The `document_tools.py` file contains a complete `DocumentToolsManager` class with `_configure_settings()` and `build_document_tools()` methods fully implemented.* LlamaIndex Settings are properly configured with OpenAI LLM (gpt-3.5-turbo) and OpenAI embeddings (text-embedding-ada-002).* Vocareum API compatibility is implemented using the `api_base` parameter for both OpenAI and OpenAIEmbedding instances.* Document processing successfully loads all three 10-K PDF files (AAPL, GOOGL, TSLA) from the data directory.* Vector indices are created successfully and queryable for each company document. |
| Create QueryEngineTool objects with proper metadata and descriptions                        | * Three QueryEngineTool objects are created, one for each company (Apple, Google, Tesla).* Each tool has a descriptive name following the pattern `{SYMBOL}_10k_filing_tool` (e.g., `AAPL_10k_filing_tool`).* Tool descriptions clearly explain the purpose and use cases for each document tool.* Query engines are properly wrapped and accessible through the tools interface.* Tools can successfully answer questions about company-specific information from 10-K filings.                                                                                                                                                 |

## Function Tools Implementation

| Criteria                                                                 | Submission Requirements                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| ------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Implement database query tool with natural language to SQL generation    | * The `create_function_tools()` method in `function_tools.py` contains a complete `database_query_tool` function implementation.* Natural language queries are successfully converted to SQL using LLM with the provided database schema.* SQL queries are executed against the SQLite database and return properly formatted results.* Results include column names in the output for PII detection coordination.* Error handling manages SQL syntax errors, database connection issues, and implements retry logic with error context.* Tool processes various query types including simple selects, joins, aggregations, and filtering. |
| Implement market data tool with Yahoo Finance API integration            | * The `finance_market_search_tool` function successfully identifies company symbols (AAPL, TSLA, GOOGL) from natural language queries.* Real-time stock data is fetched from Yahoo Finance API including current price, change, change percentage, and volume.* API calls include proper error handling for network failures, invalid responses, and rate limiting.* Results are formatted in a clear, readable manner with appropriate financial data presentation.* Fallback mechanisms handle API failures gracefully with informative error messages.                                                                                      |
| Implement PII protection tool with automatic field detection and masking | * The `pii_protection_tool` function successfully detects PII fields based on column names (email, phone, first_name, last_name, address, ssn).* Field-specific masking strategies are implemented for different PII types (e.g., email → ***@domain.com, phone → ***-***-XXXX).* Database results are parsed correctly and PII fields are masked in the output.* Non-PII fields remain unchanged and readable in protected results.* Protected results include a notice indicating which fields were masked for transparency.                                                                                                 |

## Agent Coordinator Implementation

| Criteria                                                                   | Submission Requirements                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| -------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Implement intelligent query routing with LLM-based tool selection          | * The `_route_query()` method in `agent_coordinator.py` successfully analyzes queries and selects appropriate tools using LLM.* Routing prompt includes clear guidelines for different query types (customers → database, prices → market, company info → documents).* Multiple tools are correctly selected for complex queries requiring different data sources.* Tool execution handles both document tools (QueryEngineTool) and function tools (FunctionTool) appropriately.* Routing demonstrates intelligent decision-making across various query types and complexity levels. |
| Implement automatic PII protection coordination between tools              | * The `_check_and_apply_pii_protection()` method correctly identifies when database results contain PII fields.* PII field detection uses the `_detect_pii_fields()` method to analyze column names from query results.* PII protection tool is automatically invoked when sensitive fields are detected in database results.* Protected results replace the original database output seamlessly without manual intervention.* Non-database results pass through without unnecessary PII processing for optimal performance.                                                             |
| Implement multi-tool result synthesis with comprehensive answer generation | * The `query()` method successfully coordinates end-to-end query processing from routing to final response.* Single-tool results are returned directly without unnecessary synthesis overhead.* Multi-tool results are synthesized using LLM to create comprehensive, integrated answers.* Synthesis prompt effectively guides the LLM to combine information from different sources coherently.* Final responses demonstrate proper integration of document analysis, database queries, and market data.                                                                                  |

## System Integration and Testing

| Criteria                                                                | Submission Requirements                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ----------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Implement complete modular architecture with proper tool initialization | * The `_configure_settings()` method properly sets up LlamaIndex with Vocareum API compatibility in all three modules.* The `_create_tools()` method in AgentCoordinator successfully imports and initializes DocumentToolsManager and FunctionToolsManager.* Tools are created automatically during setup without manual intervention.* Module independence is maintained - each can be used standalone or integrated.* The `financial_agent_walkthrough.ipynb` notebook runs successfully from start to finish demonstrating complete system integration.                                                     |
| Demonstrate end-to-end query processing with diverse query types        | * The system successfully handles document-only queries targeting specific company 10-K filings.* Database queries with automatic SQL generation work correctly for portfolio and customer information.* Market data queries successfully fetch real-time stock prices and trading information.* Multi-tool queries combining database + market data or document + database + market data produce coherent results.* PII protection automatically activates when database queries return sensitive customer information.* The walkthrough notebook demonstrates all query types with clear examples and explanations. |

## Industry Best Practices

| Criteria                                                         | Submission Requirements                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ---------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Implement clean, maintainable code with proper error handling    | * All three helper modules (`document_tools.py`, `function_tools.py`, `agent_coordinator.py`) follow consistent coding style and structure.* Error handling is implemented for common failure scenarios (file not found, API errors, LLM failures, database errors).* Verbose output provides clear visibility into system operation when enabled.* Code includes appropriate comments explaining complex logic and important decisions.* No placeholder code (e.g., `pass`, `return "Not implemented"`) remains in submitted implementation. |
| Provide clear documentation and demonstrate system understanding | * Module docstrings clearly explain the purpose and functionality of each component.* Method docstrings describe parameters, return values, and behavior accurately.* The walkthrough notebook includes clear explanations of how the system works and architectural decisions.* README or inline documentation explains any customizations or implementation choices beyond basic requirements.* Comments explain non-obvious code sections and design decisions.                                                                                      |

## Suggestions to Make Your Project Stand Out

### Advanced Implementation Features

* **Enhanced Error Handling** : Implement sophisticated retry mechanisms with exponential backoff, circuit breakers for external APIs, and comprehensive fallback strategies.
* **Performance Optimization** : Add response caching for expensive LLM calls, batch processing for multiple queries, or parallel tool execution for independent operations.
* **Configuration Management** : Create external configuration files for model parameters, tool descriptions, and routing guidelines for easy customization without code changes.
* **Monitoring & Observability** : Add detailed logging, performance metrics tracking, cost analysis, or integration with monitoring tools.

### AI/ML Enhancements

* **Advanced Prompt Engineering** : Develop sophisticated prompting strategies with few-shot examples, dynamic prompt adaptation based on query types, or meta-prompting for improved routing.
* **Multi-Model Support** : Implement support for different LLM providers (Anthropic, Google, local models) with automatic fallback and model selection strategies.
* **Confidence Scoring** : Add uncertainty quantification, confidence calibration for routing decisions, or result quality assessment.
* **Tool Learning** : Implement reinforcement learning or feedback loops to improve tool selection over time based on query success patterns.

### Financial Domain Expertise

* **Advanced Financial Analysis** : Add technical analysis tools, fundamental analysis capabilities, or financial ratio calculations.
* **Regulatory Compliance** : Implement data retention policies, audit trail generation, or compliance reporting features.
* **Portfolio Analysis** : Create comprehensive portfolio analytics, risk assessment tools, or investment recommendation capabilities.
* **Market Intelligence** : Integrate news APIs, sentiment analysis, or multi-source market data aggregation.
